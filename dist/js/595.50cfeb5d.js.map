{"version":3,"file":"js/595.50cfeb5d.js","mappings":"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","sources":["webpack://my-project/./src/components/front/FrontSmallBanner.vue","webpack://my-project/./src/components/front/FrontSmallBanner.vue?565a","webpack://my-project/./src/views/front/UserFavorite.vue","webpack://my-project/./src/views/front/UserFavorite.vue?78bb"],"sourcesContent":["<template>\r\n  <div\r\n    class=\"small-banner\"\r\n    :style=\"[{'background-image': `url(${bannerInfo.url})`},{'background-position': `${bannerInfo.position}`}]\"\r\n  >\r\n    <span class=\"fs-1\">{{bannerInfo.title}}</span>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: ['bannerInfo']\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .small-banner {\r\n    height: 280px;\r\n    background-size: cover;\r\n    background-repeat: no-repeat;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    span{\r\n      padding: 16px 24px;\r\n      color: #fff;\r\n      background-image: linear-gradient(rgba(51, 51, 51, 0.3), rgba(51, 51, 51, 0.3))\r\n    }\r\n  }\r\n</style>\r\n","import { render } from \"./FrontSmallBanner.vue?vue&type=template&id=5e21bcb2&scoped=true\"\nimport script from \"./FrontSmallBanner.vue?vue&type=script&lang=js\"\nexport * from \"./FrontSmallBanner.vue?vue&type=script&lang=js\"\n\nimport \"./FrontSmallBanner.vue?vue&type=style&index=0&id=5e21bcb2&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\Lin\\\\Desktop\\\\my-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5e21bcb2\"]])\n\nexport default __exports__","<template>\r\n  <loadingTip :active=\"isLoading\"></loadingTip>\r\n  <banner :bannerInfo=\"bannerInfo\"></banner>\r\n  <div class=\"container mb-5\">\r\n    <div v-if=\"favoriteProducts.length !== 0 \" class=\"border mt-5 mb-3 px-0 px-md-5 py-0 py-md-5\">\r\n      <table class=\"table table-borderless align-middle text-secondary\">\r\n        <thead class=\"table-light\">\r\n          <tr>\r\n            <th>縮圖</th>\r\n            <th>商品名稱</th>\r\n            <th class=\"d-none d-md-table-cell\">單價</th>\r\n            <th colspan=\"2\"></th>\r\n          </tr>\r\n        </thead>\r\n\r\n        <tbody>\r\n          <tr v-for=\"product in favoriteProducts\" :key=\"product.id\">\r\n            <td>\r\n              <img\r\n                class=\"cursor-hover\"\r\n                @click=\"getProduct(product.id)\"\r\n                :src=\"product.imgLink\"\r\n                :alt=\"product.title\"\r\n                style=\"width: 100px\"\r\n              >\r\n            </td>\r\n            <td>\r\n              <p class=\"cursor-hover\" @click=\"getProduct(product.id)\">{{ product.title }}</p>\r\n              <p class=\"d-block d-md-none\"> 單價: {{ product.price }} </p>\r\n            </td>\r\n            <td class=\"d-none d-md-table-cell\">{{product.price}}</td>\r\n            <td>\r\n              <button type=\"button\" class=\"btn btn-sm\" @click=\"addCart(product.id)\"><i class=\"bi bi-cart-plus-fill\"></i></button>\r\n            </td>\r\n            <td>\r\n              <button type=\"button\" class=\"btn btn-sm\" @click=\"delFavorite(product.id)\"><i class=\"bi bi-trash3-fill\"></i></button>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n\r\n    <div v-else class=\"border my-5 py-5\">\r\n      <div class=\"text-center py-5\">\r\n        <i class=\"bi bi-clipboard-heart text-secondary\" style=\"font-size: 120px;\"></i>\r\n        <p>您尚無加入收藏的商品</p>\r\n        <router-link class=\"btn btn-primary rounded-0\" to=\"/products\">來去逛逛</router-link>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport banner from '@/components/front/FrontSmallBanner.vue'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      favoriteData: JSON.parse(localStorage.getItem('favorite')) || [],\r\n      products: [],\r\n      bannerInfo: {\r\n        url: 'https://images.pexels.com/photos/8151548/pexels-photo-8151548.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260',\r\n        title: '收藏清單',\r\n        position: '0% 60%'\r\n      },\r\n      isLoading: false\r\n    }\r\n  },\r\n  inject: ['emitter'],\r\n  components: { banner },\r\n  computed: {\r\n    favoriteProducts () {\r\n      return this.products.filter((item) => this.favoriteData.indexOf(item.id) !== -1)\r\n    }\r\n  },\r\n  methods: {\r\n    getProducts () {\r\n      this.isLoading = true\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`\r\n      this.$http.get(api).then((res) => {\r\n        if (res.data.success) {\r\n          this.products = res.data.products\r\n          this.isLoading = false\r\n        }\r\n      })\r\n    },\r\n    getProduct (id) {\r\n      this.$router.push(`/product/${id}`)\r\n    },\r\n    delFavorite (id) {\r\n      const favoriteID = this.favoriteData.indexOf(id)\r\n      if (favoriteID !== -1) {\r\n        this.favoriteData.splice(favoriteID, 1)\r\n        this.$swal({\r\n          icon: 'success',\r\n          title: '移除成功'\r\n        })\r\n      }\r\n      localStorage.setItem('favorite', JSON.stringify(this.favoriteData))\r\n      this.emitter.emit('updateNavbarFavorite')\r\n    },\r\n    addCart (id) {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      const cart = {\r\n        product_id: id,\r\n        qty: 1\r\n      }\r\n      this.isLoading = true\r\n      this.$http\r\n        .post(api, { data: cart })\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            console.log(res)\r\n            this.isLoading = false\r\n            this.$swal({\r\n              icon: 'success',\r\n              title: `${res.data.data.product.title}<br>已加入購物車`,\r\n              text: '您可至購物車確認選購細項'\r\n            })\r\n            this.emitter.emit('updateNavbarCart')\r\n          } else {\r\n            this.isLoading = false\r\n            this.$swal({\r\n              icon: 'error',\r\n              title: '商品加入失敗',\r\n              text: '請重新加入購物車'\r\n            })\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          this.isLoading = false\r\n          this.$swal({\r\n            icon: 'error',\r\n            title: '發生錯誤',\r\n            text: err,\r\n            footer: '<a href=\"\">請洽詢管理員</a>'\r\n          })\r\n        })\r\n    }\r\n  },\r\n  created () {\r\n    this.getProducts()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./UserFavorite.vue?vue&type=template&id=7cee7d65\"\nimport script from \"./UserFavorite.vue?vue&type=script&lang=js\"\nexport * from \"./UserFavorite.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\Lin\\\\Desktop\\\\my-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","style","$props","url","position","_createElementVNode","_toDisplayString","title","props","__exports__","render","colspan","_hoisted_10","_hoisted_13","_createVNode","_component_loadingTip","active","$data","_component_banner","bannerInfo","$options","length","_hoisted_4","_Fragment","_renderList","product","key","id","onClick","src","imgLink","alt","_hoisted_6","price","type","_hoisted_17","_hoisted_18","_component_router_link","to","data","favoriteData","JSON","parse","localStorage","getItem","products","isLoading","inject","components","banner","computed","favoriteProducts","this","filter","item","indexOf","methods","getProducts","api","$http","get","then","res","success","getProduct","$router","push","delFavorite","favoriteID","splice","$swal","icon","setItem","stringify","emitter","emit","addCart","cart","product_id","qty","post","console","log","text","catch","err","footer","created"],"sourceRoot":""}