"use strict";(self["webpackChunkmy_project"]=self["webpackChunkmy_project"]||[]).push([[806],{2806:function(t,s,l){l.r(s),l.d(s,{default:function(){return T}});var e=l(3396),i=l(7139);const n={class:"container"},o={key:0,class:"border mt-5 mb-3 px-md-5 pt-5"},a={class:"process mb-5 d-none d-md-flex"},r=(0,e._)("li",null,[(0,e._)("i",{class:"bi bi-person-lines-fill fs-2"}),(0,e._)("span",null,"填寫訂購資料")],-1),c=(0,e._)("li",null,[(0,e._)("i",{class:"bi bi-check-circle-fill fs-2"}),(0,e._)("span",null,"完成商品訂購")],-1),u={class:"table table-borderless align-middle text-secondary"},d=(0,e._)("thead",{class:"table-light"},[(0,e._)("tr",null,[(0,e._)("th",null,"縮圖"),(0,e._)("th",null,"商品名稱"),(0,e._)("th",null,"尺寸"),(0,e._)("th",null,"數量"),(0,e._)("th",null,"單價"),(0,e._)("th",null,"小計"),(0,e._)("th",null,"刪除")])],-1),h=["onClick","src","alt"],p=(0,e._)("td",null,"S",-1),b={class:"d-flex align-items-center"},_=["onClick"],g=(0,e._)("i",{class:"bi bi-dash"},null,-1),y=[g],m={class:"form-control-sm text-center border-top border-bottom rounded-0"},f=["onClick"],C=(0,e._)("i",{class:"bi bi-plus"},null,-1),w=[C],x=["onClick"],k=(0,e._)("i",{class:"bi bi-trash3-fill"},null,-1),v=[k],$=(0,e.uE)('<div class="input-group"><input type="text" class="form-control" placeholder="請輸入優惠代碼"><button class="btn btn-outline-secondary" type="button">使用</button></div><ul class="cart-total py-5"><li>總計金額</li><li><span>NT$ 15400</span></li></ul><div class="d-flex flex-row-reverse py-5 border-top"><button class="btn btn-primary rounded-0">下一步:填寫訂購資料</button></div>',3),L={key:1,class:"border my-5 py-5"},q=(0,e._)("div",{class:"text-center py-5"},[(0,e._)("p",null,"您的購物車尚未加入商品"),(0,e._)("button",{class:"btn btn-primary rounded-0",type:"button"}," 繼續購物 ")],-1),P=[q];function B(t,s,l,g,C,k){const q=(0,e.up)("loadingTip");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e.Wm)(q,{active:C.isLoading},null,8,["active"]),(0,e._)("div",n,[C.carts.length?((0,e.wg)(),(0,e.iD)("div",o,[(0,e._)("ul",a,[(0,e._)("li",{class:(0,i.C_)({"bg-primary":"/user/cart"==C.processPath})},[(0,e._)("i",{class:(0,i.C_)(["bi bi-cart-check-fill fs-2",{"text-light":"/user/cart"==C.processPath}])},null,2),(0,e._)("span",{class:(0,i.C_)({"text-light":"/user/cart"==C.processPath})},"確認購買明細",2)],2),r,c]),(0,e._)("table",u,[d,(0,e._)("tbody",null,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(C.carts,((t,s)=>((0,e.wg)(),(0,e.iD)("tr",{key:s},[(0,e._)("td",null,[(0,e._)("img",{class:"cursor-hover",onClick:s=>k.getProduct(t.product_id),src:t.product.imgLink,alt:t.product.title,style:{width:"100px"}},null,8,h)]),(0,e._)("td",null,(0,i.zw)(t.product.title),1),p,(0,e._)("td",null,[(0,e._)("div",b,[(0,e._)("button",{class:(0,i.C_)(["btn btn-sm rounded-0 d-flex align-items-center border",{disabled:1==t.qty}]),type:"button",onClick:s=>k.updateCart(t,"reduceQty")},y,10,_),(0,e._)("span",m,(0,i.zw)(t.qty),1),(0,e._)("button",{class:"btn btn-sm d-flex align-items-center border rounded-0",type:"button",onClick:s=>k.updateCart(t,"addQty")},w,8,f)])]),(0,e._)("td",null,[(0,e._)("span",null,(0,i.zw)(t.product.price),1)]),(0,e._)("td",null,[(0,e._)("span",null,(0,i.zw)(t.total),1)]),(0,e._)("td",null,[(0,e._)("button",{type:"button",class:"btn btn-sm",onClick:s=>k.deleteCart(t)},v,8,x)])])))),128))])]),$])):((0,e.wg)(),(0,e.iD)("div",L,P))])],64)}var D={data(){return{carts:{},isLoading:!1,qty:"",processPath:""}},methods:{getCart(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/bear-work/cart";this.$http.get(t).then((t=>{t.data.success?(console.log(t.data.data.carts),this.carts=t.data.data.carts,this.isLoading=!1):this.$swal({icon:"error",title:"載入失敗",text:"請重新整理頁面"})})).catch((t=>{this.$swal({icon:"error",title:"發生錯誤",text:t,footer:'<a href="">請洽詢管理員</a>'}),this.isLoading=!1}))},getProduct(t){this.$router.push(`/user/product/${t}`)},deleteCart(t){const s=`https://vue3-course-api.hexschool.io/api/bear-work/cart/${t.id}`;this.$swal({title:"確定移除?",text:`【${t.product.title}】從購物車移除`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#8144AD",cancelButtonColor:"#d33",confirmButtonText:"確定",cancelButtonText:"取消",reverseButtons:!0}).then((t=>{t.isConfirmed&&(this.isLoading=!0,this.$http.delete(s).then((t=>{console.log(t),this.getCart(),this.isLoading=!1,this.$swal("移除成功","","success")})))}))},updateCart(t,s){this.isLoading=!0,this.qty=t.qty,"addQty"===s?this.qty++:"reduceQty"===s&&this.qty--;const l=`https://vue3-course-api.hexschool.io/api/bear-work/cart/${t.id}`,e={product_id:t.product.id,qty:this.qty};this.$http.put(l,{data:e}).then((t=>{this.isLoading=!1,t.data.success?(this.getCart(),console.log(t)):this.$swal({icon:"error",title:"更新失敗",text:"請重新操作"})})).catch((t=>{this.isLoading=!1,this.$swal({icon:"error",title:"發生錯誤",text:t,footer:'<a href="">請洽詢管理員</a>'})}))}},created(){this.getCart(),this.processPath=this.$route.path,console.log(this.$route.path)}},z=l(89);const Q=(0,z.Z)(D,[["render",B]]);var T=Q}}]);
//# sourceMappingURL=806.610120ab.js.map