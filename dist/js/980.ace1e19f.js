"use strict";(self["webpackChunkmy_project"]=self["webpackChunkmy_project"]||[]).push([[980],{1980:function(t,s,l){l.r(s),l.d(s,{default:function(){return ct}});var e=l(3396),a=l(7139);const n={class:"container"},r={key:0,class:"border mt-5 mb-3 px-md-5 pt-5"},o={class:"cart-table table table-borderless align-middle text-secondary"},i=(0,e._)("thead",{class:"table-light"},[(0,e._)("tr",null,[(0,e._)("th",null,"縮圖"),(0,e._)("th",null,"商品名稱"),(0,e._)("th",null,"尺寸"),(0,e._)("th",null,"數量"),(0,e._)("th",null,"單價"),(0,e._)("th",null,"小計"),(0,e._)("th",null,"刪除")])],-1),c=["onClick","src","alt"],d={class:"d-block d-md-none mt-2"},u={key:0},p={key:1},h={key:2},_={class:"mt-2"},b={class:"d-flex align-items-center"},g=["onClick"],y=(0,e._)("i",{class:"bi bi-dash"},null,-1),m=[y],f={class:"form-control-sm text-center border-top border-bottom rounded-0"},x=["onClick"],w=(0,e._)("i",{class:"bi bi-plus"},null,-1),C=[w],k={class:"mt-2"},v={class:"mt-2"},$={key:0},D={key:1},S={key:2},q={class:"d-flex align-items-center"},L=["onClick"],T=(0,e._)("i",{class:"bi bi-dash"},null,-1),z=[T],B={class:"form-control-sm text-center border-top border-bottom rounded-0"},E=["onClick"],N=(0,e._)("i",{class:"bi bi-plus"},null,-1),Q=[N],W=["onClick"],H=(0,e._)("i",{class:"bi bi-trash3-fill"},null,-1),I=[H],P=(0,e._)("div",{class:"input-group mt-5"},[(0,e._)("input",{type:"text",class:"form-control",placeholder:"請輸入優惠代碼"}),(0,e._)("button",{class:"btn btn-outline-secondary",type:"button"},"使用")],-1),j={class:"d-flex flex-row-reverse mt-5"},F={class:"cart-total"},M=(0,e._)("span",null,"商品總金額",-1),O={class:"text-dark"},Y=(0,e._)("li",null,[(0,e._)("span",null,"+ 運費"),(0,e._)("span",{class:"text-dark"},"NT$ 0")],-1),Z=(0,e._)("li",null,[(0,e._)("span",null,"- 優惠折抵"),(0,e._)("span",{class:"text-dark"},"NT$ 0")],-1),A=(0,e._)("span",{class:"h4 text-dark fw-bold"},"付款總金額",-1),K={class:"h4 fw-bold text-danger"},U=(0,e._)("div",{class:"d-flex flex-row-reverse py-5 border-top"},[(0,e._)("button",{class:"btn btn-primary rounded-0"},"下一步:填寫訂購資料")],-1),G={key:1,class:"border my-5 py-5"},J={class:"text-center py-5"},R=(0,e._)("i",{class:"bi bi-cart3 text-secondary",style:{"font-size":"120px"}},null,-1),V=(0,e._)("p",null,"您的購物車尚未加入商品",-1),X=(0,e.Uk)("繼續購物");function tt(t,s,l,y,w,T){const N=(0,e.up)("loadingTip"),H=(0,e.up)("process"),tt=(0,e.up)("router-link");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e.Wm)(N,{active:w.isLoading},null,8,["active"]),(0,e._)("div",n,[w.carts.length?((0,e.wg)(),(0,e.iD)("div",r,[(0,e.Wm)(H,{path:w.processPath},null,8,["path"]),(0,e._)("table",o,[i,(0,e._)("tbody",null,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(w.carts,((t,s)=>((0,e.wg)(),(0,e.iD)("tr",{key:s,class:"border-bottom"},[(0,e._)("td",null,[(0,e._)("img",{class:"cursor-hover",onClick:s=>T.getProduct(t.product_id),src:t.product.imgLink,alt:t.product.title,style:{width:"100px"}},null,8,c)]),(0,e._)("td",null,[(0,e._)("div",null,(0,a.zw)(t.product.title),1),(0,e._)("div",d,["SWIM"==t.product.category||"FITNESS"==t.product.category?((0,e.wg)(),(0,e.iD)("span",u,"S")):"SHOES"==t.product.category?((0,e.wg)(),(0,e.iD)("span",p,"36")):((0,e.wg)(),(0,e.iD)("span",h,"-")),(0,e._)("div",_,[(0,e._)("div",b,[(0,e._)("button",{class:(0,a.C_)(["btn btn-sm rounded-0 d-flex align-items-center border",{disabled:1==t.qty}]),type:"button",onClick:s=>T.updateCart(t,"reduceQty")},m,10,g),(0,e._)("span",f,(0,a.zw)(t.qty),1),(0,e._)("button",{class:"btn btn-sm d-flex align-items-center border rounded-0",type:"button",onClick:s=>T.updateCart(t,"addQty")},C,8,x)])]),(0,e._)("div",k,(0,a.zw)(t.product.price)+" / 件",1),(0,e._)("div",v,"小計: "+(0,a.zw)(t.total),1)])]),(0,e._)("td",null,["SWIM"==t.product.category||"FITNESS"==t.product.category?((0,e.wg)(),(0,e.iD)("span",$,"S")):"SHOES"==t.product.category?((0,e.wg)(),(0,e.iD)("span",D,"36")):((0,e.wg)(),(0,e.iD)("span",S,"-"))]),(0,e._)("td",null,[(0,e._)("div",q,[(0,e._)("button",{class:(0,a.C_)(["btn btn-sm rounded-0 d-flex align-items-center border",{disabled:1==t.qty}]),type:"button",onClick:s=>T.updateCart(t,"reduceQty")},z,10,L),(0,e._)("span",B,(0,a.zw)(t.qty),1),(0,e._)("button",{class:"btn btn-sm d-flex align-items-center border rounded-0",type:"button",onClick:s=>T.updateCart(t,"addQty")},Q,8,E)])]),(0,e._)("td",null,[(0,e._)("span",null,(0,a.zw)(t.product.price),1)]),(0,e._)("td",null,[(0,e._)("span",null,(0,a.zw)(t.total),1)]),(0,e._)("td",null,[(0,e._)("button",{type:"button",class:"btn btn-sm",onClick:s=>T.deleteCart(t)},I,8,W)])])))),128))])]),P,(0,e._)("div",j,[(0,e._)("ul",F,[(0,e._)("li",null,[M,(0,e._)("span",O,"NT$ "+(0,a.zw)(T.total),1)]),Y,Z,(0,e._)("li",null,[A,(0,e._)("span",K,"NT$ "+(0,a.zw)(T.payTotal),1)])])]),U])):((0,e.wg)(),(0,e.iD)("div",G,[(0,e._)("div",J,[R,V,(0,e.Wm)(tt,{class:"btn btn-primary rounded-0",to:"/user/products"},{default:(0,e.w5)((()=>[X])),_:1})])]))])],64)}const st={class:"process mb-5"};function lt(t,s,l,n,r,o){return(0,e.wg)(),(0,e.iD)("ul",st,[(0,e._)("li",{class:(0,a.C_)(["d-md-flex",{"bg-primary":"1"==l.path,"d-none":"1"!=l.path}])},[(0,e._)("i",{class:(0,a.C_)(["bi bi-cart-check-fill fs-2",{"text-light":"1"==l.path}])},null,2),(0,e._)("span",{class:(0,a.C_)({"text-light":"1"==l.path})},"確認購買明細",2)],2),(0,e._)("li",{class:(0,a.C_)(["d-md-flex",{"bg-primary":"2"==l.path,"d-none":"2"!=l.path}])},[(0,e._)("i",{class:(0,a.C_)(["bi bi-person-lines-fill fs-2",{"text-light":"2"==l.path}])},null,2),(0,e._)("span",{class:(0,a.C_)({"text-light":"2"==l.path})},"填寫訂購資料",2)],2),(0,e._)("li",{class:(0,a.C_)(["d-md-flex",{"bg-primary":"3"==l.path,"d-none":"3"!=l.path}])},[(0,e._)("i",{class:(0,a.C_)(["bi bi-check-circle-fill fs-2",{"text-light":"3"==l.path}])},null,2),(0,e._)("span",{class:(0,a.C_)({"text-light":"3"==l.path})},"完成商品訂購",2)],2)])}var et={props:["path"]},at=l(89);const nt=(0,at.Z)(et,[["render",lt]]);var rt=nt,ot={data(){return{carts:{},isLoading:!1,qty:"",processPath:"1"}},components:{process:rt},methods:{getCart(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/bear-work/cart";this.$http.get(t).then((t=>{t.data.success?(console.log(t.data.data.carts),this.carts=t.data.data.carts,this.isLoading=!1):this.$swal({icon:"error",title:"載入失敗",text:"請重新整理頁面"})})).catch((t=>{this.$swal({icon:"error",title:"發生錯誤",text:t,footer:'<a href="">請洽詢管理員</a>'}),this.isLoading=!1}))},getProduct(t){this.$router.push(`/user/product/${t}`)},deleteCart(t){const s=`https://vue3-course-api.hexschool.io/api/bear-work/cart/${t.id}`;this.$swal({title:"確定移除?",text:`【${t.product.title}】從購物車移除`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#8144AD",cancelButtonColor:"#d33",confirmButtonText:"確定",cancelButtonText:"取消",reverseButtons:!0}).then((t=>{t.isConfirmed&&(this.isLoading=!0,this.$http.delete(s).then((t=>{console.log(t),this.getCart(),this.isLoading=!1,this.$swal("移除成功","","success")})))}))},updateCart(t,s){this.isLoading=!0,this.qty=t.qty,"addQty"===s?this.qty++:"reduceQty"===s&&this.qty--;const l=`https://vue3-course-api.hexschool.io/api/bear-work/cart/${t.id}`,e={product_id:t.product.id,qty:this.qty};this.$http.put(l,{data:e}).then((t=>{this.isLoading=!1,t.data.success?(this.getCart(),console.log(t)):this.$swal({icon:"error",title:"更新失敗",text:"請重新操作"})})).catch((t=>{this.isLoading=!1,this.$swal({icon:"error",title:"發生錯誤",text:t,footer:'<a href="">請洽詢管理員</a>'})}))}},computed:{total(){let t=0;return this.carts.forEach((s=>{t+=s.total})),t},payTotal(){let t=0;return this.carts.forEach((s=>{t+=s.final_total})),t}},created(){this.getCart()}};const it=(0,at.Z)(ot,[["render",tt]]);var ct=it}}]);
//# sourceMappingURL=980.ace1e19f.js.map