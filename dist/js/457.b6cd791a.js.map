{"version":3,"file":"js/457.b6cd791a.js","mappings":"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","sources":["webpack://my-project/./src/views/front/UserProducts.vue","webpack://my-project/./src/views/front/UserProducts.vue?4141"],"sourcesContent":["<template>\r\n  <loadingTip :active=\"isLoading\"></loadingTip>\r\n  <div class=\"container\">\r\n    [test]目前選到的分類:{{activedCategory}}\r\n    <div class=\"row mt-4\">\r\n      <div class=\"col-md-2 d-none d-md-block\">\r\n        <div class=\"list-group list-group-flush rounded-0\">\r\n          <!-- <a href=\"#\" class=\"list-group-item list-group-item-action disabled fw-bold\">產品類別</a> -->\r\n          <a\r\n            href=\"#\"\r\n            class=\"list-group-item list-group-item-action active\"\r\n            aria-current=\"true\"\r\n            @click.prevent=\"activedCategory = ''\"\r\n          >\r\n            全部商品\r\n          </a>\r\n          <a\r\n            v-for=\"(className,key) in categories\" :key=\"key\"\r\n            href=\"#\"\r\n            class=\"list-group-item list-group-item-action\"\r\n            @click.prevent=\"activedCategory = className\"\r\n          >\r\n            {{className}}\r\n          </a>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-12 col-md-10\">\r\n        <div class=\"row\">\r\n          <div\r\n            class=\"col-12 col-sm-6 col-md-4 col-lg-3 mb-3\"\r\n            v-for=\"item in products\"\r\n            :key=\"item.id\"\r\n          >\r\n            <div class=\"card rounded-0 border-0\">\r\n              <div class=\"text-secondary cursor-hover\">\r\n                <div class=\"product-hover\">\r\n                  <div\r\n                    class=\"rounded-0 card-imge\"\r\n                    :style=\"{ backgroundImage: `url(${item.imgLink})` }\"\r\n                  ></div>\r\n\r\n                  <div class=\"mask\" @click=\"getProduct(item.id)\"></div>\r\n\r\n                  <button\r\n                    v-if=\"item.unit != 0\"\r\n                    type=\"button\"\r\n                    class=\"btn btn-primary add-cart-btn w-100 rounded-0\"\r\n                    @click.prevent=\"addCart(item.id)\"\r\n                  >\r\n                    加入購物車\r\n                  </button>\r\n\r\n                  <div\r\n                    v-if=\"item.unit == 0\"\r\n                    class=\"mask-white\"\r\n                    @click=\"getProduct(item.id)\"\r\n                  >\r\n                    <p\r\n                      class=\"fs-3 border border-primary border-end-0 border-start-0 text-center text-primary fw-blod\"\r\n                    >\r\n                      SALE OUT\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <div class=\"pt-1 text-center\" @click=\"getProduct(item.id)\">\r\n                  <div>{{ item.title }}</div>\r\n                  <div v-if=\"item.origin_price\" class=\"fw-bold text-danger\">\r\n                    NT${{ item.price }}\r\n                  </div>\r\n                  <del v-if=\"item.origin_price\">NT${{ item.origin_price }}</del>\r\n                  <div v-else class=\"fw-bold\">NT${{ item.price }}</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      product: '',\r\n      products: '',\r\n      isLoading: false,\r\n      categories: [],\r\n      activedCategory: ''\r\n    }\r\n  },\r\n  computed: {\r\n    filterProducts () {\r\n      return this.products.filter((item) => {\r\n        return item.category.match(this.activedCategory)\r\n      })\r\n    }\r\n  },\r\n  methods: {\r\n    // 1.取得商品列表\r\n    getProducts () {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`\r\n      this.isLoading = true\r\n      this.$http.get(api).then((res) => {\r\n        if (res.data.success) {\r\n          console.log(res)\r\n          this.products = res.data.products\r\n          this.isLoading = false\r\n          this.getCategories()\r\n        }\r\n      })\r\n    },\r\n    // 2.取得單一商品頁\r\n    getProduct (id) {\r\n      this.$router.push(`/user/product/${id}`)\r\n    },\r\n    addCart (id) {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      const cart = {\r\n        product_id: id,\r\n        qty: 1\r\n      }\r\n      this.isLoading = true\r\n      this.$http\r\n        .post(api, { data: cart })\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            console.log(res)\r\n            this.isLoading = false\r\n            this.$swal({\r\n              icon: 'success',\r\n              title: `${res.data.data.product.title}<br>已加入購物車`,\r\n              text: '您可至購物車確認選購細項'\r\n            })\r\n          } else {\r\n            this.isLoading = false\r\n            this.$swal({\r\n              icon: 'error',\r\n              title: '商品加入失敗',\r\n              text: '請重新加入購物車'\r\n            })\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          this.isLoading = false\r\n          this.$swal({\r\n            icon: 'error',\r\n            title: '發生錯誤',\r\n            text: err,\r\n            footer: '<a href=\"\">請洽詢管理員</a>'\r\n          })\r\n        })\r\n    },\r\n    getCategories () { // 取得商品分類並過濾\r\n      const categories = new Set()\r\n      this.products.forEach((item) => {\r\n        categories.add(item.category)\r\n      })\r\n      this.categories = [...categories]\r\n    }\r\n  },\r\n  created () {\r\n    this.getProducts()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./UserProducts.vue?vue&type=template&id=3e916482\"\nimport script from \"./UserProducts.vue?vue&type=script&lang=js\"\nexport * from \"./UserProducts.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\Lin\\\\Desktop\\\\my-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_14","_createVNode","_component_loadingTip","active","$data","_toDisplayString","href","onClick","_createElementBlock","_Fragment","_renderList","className","key","_hoisted_5","item","id","style","backgroundImage","imgLink","$options","unit","type","_hoisted_12","title","origin_price","price","_hoisted_18","data","product","products","isLoading","categories","activedCategory","computed","filterProducts","this","filter","category","match","methods","getProducts","api","$http","get","then","res","success","console","log","getCategories","getProduct","$router","push","addCart","cart","product_id","qty","post","$swal","icon","text","catch","err","footer","Set","forEach","add","created","__exports__","render"],"sourceRoot":""}