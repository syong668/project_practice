"use strict";(self["webpackChunkmy_project"]=self["webpackChunkmy_project"]||[]).push([[716],{6825:function(t,s,e){e.d(s,{Z:function(){return d}});var a=e(3396),o=e(7139);const n={class:"process mb-5"};function l(t,s,e,l,r,i){return(0,a.wg)(),(0,a.iD)("ul",n,[(0,a._)("li",{class:(0,o.C_)(["d-md-flex",{"bg-primary":"1"==e.path,"d-none":"1"!=e.path}])},[(0,a._)("i",{class:(0,o.C_)(["bi bi-cart-check-fill fs-2",{"text-light":"1"==e.path}])},null,2),(0,a._)("span",{class:(0,o.C_)({"text-light":"1"==e.path})},"確認購買明細",2)],2),(0,a._)("li",{class:(0,o.C_)(["d-md-flex",{"bg-primary":"2"==e.path,"d-none":"2"!=e.path}])},[(0,a._)("i",{class:(0,o.C_)(["bi bi-person-lines-fill fs-2",{"text-light":"2"==e.path}])},null,2),(0,a._)("span",{class:(0,o.C_)({"text-light":"2"==e.path})},"填寫訂購資料",2)],2),(0,a._)("li",{class:(0,o.C_)(["d-md-flex",{"bg-primary":"3"==e.path,"d-none":"3"!=e.path}])},[(0,a._)("i",{class:(0,o.C_)(["bi bi-check-circle-fill fs-2",{"text-light":"3"==e.path}])},null,2),(0,a._)("span",{class:(0,o.C_)({"text-light":"3"==e.path})},"完成商品訂購",2)],2)])}var r={props:["path"]},i=e(89);const c=(0,i.Z)(r,[["render",l]]);var d=c},510:function(t,s,e){e.d(s,{Z:function(){return d}});var a=e(3396),o=e(7139);const n={class:"fs-1"};function l(t,s,e,l,r,i){return(0,a.wg)(),(0,a.iD)("div",{class:"small-banner",style:(0,o.j5)([{"background-image":`url(${e.bannerInfo.url})`},{"background-position":`${e.bannerInfo.position}`}])},[(0,a._)("span",n,(0,o.zw)(e.bannerInfo.title),1)],4)}var r={props:["bannerInfo"]},i=e(89);const c=(0,i.Z)(r,[["render",l],["__scopeId","data-v-5e21bcb2"]]);var d=c},8716:function(t,s,e){e.r(s),e.d(s,{default:function(){return bt}});var a=e(3396),o=e(7139),n=e(9242);const l={class:"container mb-5"},r={key:0,class:"border mt-5 mb-3 px-md-5 pt-5"},i={class:"cart-table table table-borderless align-middle text-secondary"},c=(0,a._)("thead",{class:"table-light"},[(0,a._)("tr",null,[(0,a._)("th",null,"縮圖"),(0,a._)("th",null,"商品名稱"),(0,a._)("th",null,"尺寸"),(0,a._)("th",null,"數量"),(0,a._)("th",null,"單價"),(0,a._)("th",null,"小計"),(0,a._)("th",null,"刪除")])],-1),d=["onClick","src","alt"],u=["onClick"],p={key:0,class:"text-success"},h={class:"d-block d-md-none mt-2"},b={key:0},_={key:1},g={key:2},m={class:"mt-2"},y={class:"d-flex align-items-center"},f=["onClick"],w=(0,a._)("i",{class:"bi bi-dash"},null,-1),C=[w],k={class:"form-control-sm text-center border-top border-bottom rounded-0"},x=["onClick"],v=(0,a._)("i",{class:"bi bi-plus"},null,-1),$=[v],D={class:"mt-2"},L={class:"mt-2"},T={key:0},z={key:1},I={key:2},q={class:"d-flex align-items-center"},S=["onClick"],N=(0,a._)("i",{class:"bi bi-dash"},null,-1),W=[N],Z={class:"form-control-sm text-center border-top border-bottom rounded-0"},j=["onClick"],B=(0,a._)("i",{class:"bi bi-plus"},null,-1),E=[B],Q=["onClick"],P=(0,a._)("i",{class:"bi bi-trash3-fill"},null,-1),H=[P],U={class:"input-group mt-5"},F={class:"d-flex flex-row-reverse mt-5"},M={class:"cart-total"},O=(0,a._)("span",null,"商品總金額",-1),Y={class:"text-dark"},A=(0,a._)("li",null,[(0,a._)("span",null,"+ 運費"),(0,a._)("span",{class:"text-dark"},"NT$ 0")],-1),K=(0,a._)("span",null,"- 優惠折抵",-1),V={class:"text-dark"},G=(0,a._)("span",{class:"h4 text-dark fw-bold"},"付款總金額",-1),J={class:"h4 fw-bold text-danger"},R={class:"d-flex justify-content-between py-5 border-top"},X=(0,a._)("i",{class:"bi bi-arrow-left pe-1"},null,-1),tt=(0,a.Uk)("繼續選購"),st=(0,a.Uk)("下一步:填寫訂購資料"),et=(0,a._)("i",{class:"bi bi-arrow-right ps-1"},null,-1),at={key:1,class:"border my-5 py-5"},ot={class:"text-center py-5"},nt=(0,a._)("i",{class:"bi bi-cart3 text-secondary",style:{"font-size":"120px"}},null,-1),lt=(0,a._)("p",null,"您的購物車尚未加入商品",-1),rt=(0,a.Uk)("來去逛逛");function it(t,s,e,w,v,N){const B=(0,a.up)("loadingTip"),P=(0,a.up)("banner"),it=(0,a.up)("process"),ct=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(B,{active:v.isLoading},null,8,["active"]),(0,a.Wm)(P,{bannerInfo:v.bannerInfo},null,8,["bannerInfo"]),(0,a._)("div",l,[v.carts.length?((0,a.wg)(),(0,a.iD)("div",r,[(0,a.Wm)(it,{path:v.processPath},null,8,["path"]),(0,a._)("table",i,[c,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(v.carts,((t,s)=>((0,a.wg)(),(0,a.iD)("tr",{key:s,class:"border-bottom"},[(0,a._)("td",null,[(0,a._)("img",{class:"cursor-hover",onClick:s=>N.getProduct(t.product_id),src:t.product.imgLink,alt:t.product.title,style:{width:"100px"}},null,8,d)]),(0,a._)("td",null,[(0,a._)("div",{class:"cursor-hover",onClick:s=>N.getProduct(t.product_id)},(0,o.zw)(t.product.title),9,u),t.coupon?((0,a.wg)(),(0,a.iD)("div",p,"已套用優惠券 "+(0,o.zw)(t.coupon.code),1)):(0,a.kq)("",!0),(0,a._)("div",h,["SWIM"==t.product.category||"FITNESS"==t.product.category?((0,a.wg)(),(0,a.iD)("span",b,"S")):"SHOES"==t.product.category?((0,a.wg)(),(0,a.iD)("span",_,"36")):((0,a.wg)(),(0,a.iD)("span",g,"-")),(0,a._)("div",m,[(0,a._)("div",y,[(0,a._)("button",{class:(0,o.C_)(["btn btn-sm rounded-0 d-flex align-items-center border",{disabled:1==t.qty}]),type:"button",onClick:s=>N.updateCart(t,"reduceQty")},C,10,f),(0,a._)("span",k,(0,o.zw)(t.qty),1),(0,a._)("button",{class:"btn btn-sm d-flex align-items-center border rounded-0",type:"button",onClick:s=>N.updateCart(t,"addQty")},$,8,x)])]),(0,a._)("div",D,(0,o.zw)(t.product.price)+" / 件",1),(0,a._)("div",L,"小計: "+(0,o.zw)(t.total),1)])]),(0,a._)("td",null,["SWIM"==t.product.category||"FITNESS"==t.product.category?((0,a.wg)(),(0,a.iD)("span",T,"S")):"SHOES"==t.product.category?((0,a.wg)(),(0,a.iD)("span",z,"36")):((0,a.wg)(),(0,a.iD)("span",I,"-"))]),(0,a._)("td",null,[(0,a._)("div",q,[(0,a._)("button",{class:(0,o.C_)(["btn btn-sm rounded-0 d-flex align-items-center border",{disabled:1==t.qty}]),type:"button",onClick:s=>N.updateCart(t,"reduceQty")},W,10,S),(0,a._)("span",Z,(0,o.zw)(t.qty),1),(0,a._)("button",{class:"btn btn-sm d-flex align-items-center border rounded-0",type:"button",onClick:s=>N.updateCart(t,"addQty")},E,8,j)])]),(0,a._)("td",null,[(0,a._)("span",null,(0,o.zw)(t.product.price),1)]),(0,a._)("td",null,[(0,a._)("span",null,(0,o.zw)(t.total),1)]),(0,a._)("td",null,[(0,a._)("button",{type:"button",class:"btn btn-sm",onClick:s=>N.deleteCart(t)},H,8,Q)])])))),128))])]),(0,a._)("div",U,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>v.couponCode=t),type:"text",class:"form-control rounded-0",placeholder:"請輸入優惠代碼"},null,512),[[n.nr,v.couponCode]]),(0,a._)("button",{onClick:s[1]||(s[1]=(...t)=>N.useCoupon&&N.useCoupon(...t)),class:"btn btn-outline-secondary rounded-0",type:"button"},"使用")]),(0,a._)("div",F,[(0,a._)("ul",M,[(0,a._)("li",null,[O,(0,a._)("span",Y,"NT$ "+(0,o.zw)(N.total),1)]),A,(0,a._)("li",null,[K,(0,a._)("span",V,"NT$ "+(0,o.zw)(N.couponTotal),1)]),(0,a._)("li",null,[G,(0,a._)("span",J,"NT$ "+(0,o.zw)(N.payTotal),1)])])]),(0,a._)("div",R,[(0,a.Wm)(ct,{to:"/products",class:"btn btn-outline-primary rounded-0"},{default:(0,a.w5)((()=>[X,tt])),_:1}),(0,a.Wm)(ct,{to:"/checkfrom",class:"btn btn-primary rounded-0"},{default:(0,a.w5)((()=>[st,et])),_:1})])])):((0,a.wg)(),(0,a.iD)("div",at,[(0,a._)("div",ot,[nt,lt,(0,a.Wm)(ct,{class:"btn btn-primary rounded-0",to:"/products"},{default:(0,a.w5)((()=>[rt])),_:1})])]))])],64)}var ct=e(6825),dt=e(510),ut={data(){return{carts:{},isLoading:!1,qty:"",processPath:"1",couponCode:"",bannerInfo:{url:"https://images.pexels.com/photos/7525655/pexels-photo-7525655.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260",title:"購物車",position:"0% 50%"}}},inject:["emitter"],computed:{total(){let t=0;return this.carts.forEach((s=>{t+=s.total})),t},payTotal(){let t=0;return this.carts.forEach((s=>{t+=s.final_total})),t},couponTotal(){return this.total-this.payTotal}},components:{process:ct.Z,banner:dt.Z},methods:{getCart(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/bear-work/cart";this.$http.get(t).then((t=>{t.data.success?(console.log(t.data.data.carts),this.carts=t.data.data.carts,this.isLoading=!1):this.$swal({icon:"error",title:"載入失敗",text:"請重新整理頁面"})})).catch((t=>{this.$swal({icon:"error",title:"發生錯誤",text:t,footer:'<a href="">請洽詢管理員</a>'}),this.isLoading=!1}))},getProduct(t){this.$router.push(`/product/${t}`)},deleteCart(t){const s=`https://vue3-course-api.hexschool.io/api/bear-work/cart/${t.id}`;this.$swal({title:"確定移除?",text:`【${t.product.title}】從購物車移除`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#8144AD",cancelButtonColor:"#d33",confirmButtonText:"確定",cancelButtonText:"取消",reverseButtons:!0}).then((t=>{t.isConfirmed&&(this.isLoading=!0,this.$http.delete(s).then((t=>{console.log(t),this.getCart(),this.isLoading=!1,this.$swal("移除成功","","success"),this.emitter.emit("updateNavbarCart")})))}))},updateCart(t,s){this.isLoading=!0,this.qty=t.qty,"addQty"===s?this.qty++:"reduceQty"===s&&this.qty--;const e=`https://vue3-course-api.hexschool.io/api/bear-work/cart/${t.id}`,a={product_id:t.product.id,qty:this.qty};this.$http.put(e,{data:a}).then((t=>{this.isLoading=!1,t.data.success?(console.log(t),this.getCart(),this.emitter.emit("updateNavbarCart")):this.$swal({icon:"error",title:"更新失敗",text:"請重新操作"})})).catch((t=>{this.isLoading=!1,this.$swal({icon:"error",title:"發生錯誤",text:t,footer:'<a href="">請洽詢管理員</a>'})}))},useCoupon(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/bear-work/coupon",s={code:this.couponCode};this.$http.post(t,{data:s}).then((t=>{console.log(t),this.isLoading=!1,t.data.success?(this.getCart(),this.$swal({icon:"success",title:t.data.message})):this.$swal({icon:"error",title:t.data.message})})).catch((t=>{this.isLoading=!1,this.$swal({icon:"error",title:"發生錯誤",text:t,footer:'<a href="">請洽詢管理員</a>'})}))}},created(){this.getCart()}},pt=e(89);const ht=(0,pt.Z)(ut,[["render",it]]);var bt=ht}}]);
//# sourceMappingURL=716.0b00204e.js.map