"use strict";(self["webpackChunkmy_project"]=self["webpackChunkmy_project"]||[]).push([[933],{6825:function(t,l,r){r.d(l,{Z:function(){return c}});var e=r(3396),s=r(7139);const a={class:"process mb-5"};function o(t,l,r,o,i,n){return(0,e.wg)(),(0,e.iD)("ul",a,[(0,e._)("li",{class:(0,s.C_)(["d-md-flex",{"bg-primary":"1"==r.path,"d-none":"1"!=r.path}])},[(0,e._)("i",{class:(0,s.C_)(["bi bi-cart-check-fill fs-2",{"text-light":"1"==r.path}])},null,2),(0,e._)("span",{class:(0,s.C_)({"text-light":"1"==r.path})},"確認購買明細",2)],2),(0,e._)("li",{class:(0,s.C_)(["d-md-flex",{"bg-primary":"2"==r.path,"d-none":"2"!=r.path}])},[(0,e._)("i",{class:(0,s.C_)(["bi bi-person-lines-fill fs-2",{"text-light":"2"==r.path}])},null,2),(0,e._)("span",{class:(0,s.C_)({"text-light":"2"==r.path})},"填寫訂購資料",2)],2),(0,e._)("li",{class:(0,s.C_)(["d-md-flex",{"bg-primary":"3"==r.path,"d-none":"3"!=r.path}])},[(0,e._)("i",{class:(0,s.C_)(["bi bi-check-circle-fill fs-2",{"text-light":"3"==r.path}])},null,2),(0,e._)("span",{class:(0,s.C_)({"text-light":"3"==r.path})},"完成商品訂購",2)],2)])}var i={props:["path"]},n=r(89);const d=(0,n.Z)(i,[["render",o]]);var c=d},9933:function(t,l,r){r.r(l),r.d(l,{default:function(){return N}});var e=r(3396),s=r(7139),a=r(9242);const o={class:"container"},i={class:"border mt-5 mb-3 pt-5"},n={class:"row justify-content-center flex-md-row-reverse mt-5 py-5"},d={class:"col-11 col-xl-6"},c={class:"d-flex flex-column justify-content-between mb-3"},u=(0,e._)("div",{class:"bg-light text-primary border-5 border-start border-primary fw-bold h5 ps-2 py-1"},"購物清單 ",-1),h={class:"table table-sm align-middle checkout-table"},p=(0,e._)("thead",null,[(0,e._)("tr",null,[(0,e._)("th"),(0,e._)("th",null,"產品"),(0,e._)("th",null,"數量"),(0,e._)("th",null,"單價"),(0,e._)("th",null,"小計")])],-1),_=["src","alt"],b=(0,e._)("br",null,null,-1),g=(0,e._)("br",null,null,-1),m=(0,e.Uk)("S"),w={class:"table table-borderless text-end"},f={key:0},x=(0,e._)("td",null,null,-1),y=(0,e._)("td",{colspan:"2"},"折扣金額",-1),v={colspan:"2"},k={class:"text-danger"},z=(0,e._)("td",null,null,-1),C=(0,e._)("td",{colspan:"2"},"應付金額",-1),D={colspan:"2"},$={class:"col-11 col-xl-4"},L={class:"border-primary text-primary pb-1 mb-3"},j=(0,e._)("div",{class:"border-5 border-start border-primary fw-bold h5 ps-2 py-1 bg-light"},"收件資料",-1),I={class:"table"},P=(0,e._)("th",null,"姓名",-1),T=(0,e._)("th",null,"電話",-1),M=(0,e._)("th",null,"地址",-1),O=(0,e._)("th",null,"e-mail",-1),Z=(0,e._)("th",null,"留言內容",-1),q=(0,e._)("th",null,"訂單編號",-1),H=(0,e._)("th",null,"付款狀態",-1);function U(t,l,r,U,W,Y){const E=(0,e.up)("loadingTip"),K=(0,e.up)("process");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e.Wm)(E,{active:W.isLoading},null,8,["active"]),(0,e._)("div",o,[(0,e._)("div",i,[(0,e.Wm)(K,{path:W.processPath},null,8,["path"]),(0,e._)("div",n,[(0,e._)("div",d,[(0,e._)("div",c,[u,(0,e._)("table",h,[p,(0,e._)("tbody",null,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(W.products,(t=>((0,e.wg)(),(0,e.iD)("tr",{key:t.id},[(0,e._)("td",null,[(0,e._)("img",{width:"80",src:t.product.imgLink,alt:t.product.title},null,8,_)]),(0,e._)("td",null,[(0,e.Uk)((0,s.zw)(t.product.title),1),b,g,m]),(0,e._)("td",null,(0,s.zw)(t.qty),1),(0,e._)("td",null,(0,s.zw)(t.product.price),1),(0,e._)("td",null,(0,s.zw)(t.total),1)])))),128))]),(0,e._)("tfoot",w,[Y.couponTotal?((0,e.wg)(),(0,e.iD)("tr",f,[x,y,(0,e._)("td",v,(0,s.zw)(Y.couponTotal),1)])):(0,e.kq)("",!0),(0,e._)("tr",k,[z,C,(0,e._)("td",D,"NT$ "+(0,s.zw)(Math.round(W.order.total)),1)])])])])]),(0,e._)("div",$,[(0,e._)("div",L,[j,(0,e._)("table",I,[(0,e._)("tbody",null,[(0,e._)("tr",null,[P,(0,e._)("td",null,(0,s.zw)(W.user.name),1)]),(0,e._)("tr",null,[T,(0,e._)("td",null,(0,s.zw)(W.user.tel),1)]),(0,e._)("tr",null,[M,(0,e._)("td",null,(0,s.zw)(W.user.address),1)]),(0,e._)("tr",null,[O,(0,e._)("td",null,(0,s.zw)(W.user.email),1)]),(0,e._)("tr",null,[Z,(0,e._)("td",null,(0,s.zw)(W.order.message),1)]),(0,e._)("tr",null,[q,(0,e._)("td",null,(0,s.zw)(W.order.create_at),1)]),(0,e._)("tr",null,[H,(0,e._)("td",{class:(0,s.C_)({"text-success":W.order.is_paid,"text-danger":!W.order.is_paid})},(0,s.zw)(W.order.is_paid?"已付款":"未付款"),3)])])]),W.order.is_paid?(0,e.kq)("",!0):((0,e.wg)(),(0,e.iD)("button",{key:0,onClick:l[0]||(l[0]=(0,a.iM)(((...t)=>Y.toPaid&&Y.toPaid(...t)),["prevent"])),class:"btn btn-outline-primary rounded-0 w-100"},"點此付款去"))])])])])])],64)}var W=r(6825),Y={data(){return{processPath:3,orderID:"",order:[],products:[],user:[],isLoading:!1}},computed:{couponTotal(){let t=0;return Object.values(this.products).forEach((l=>{t+=l.total})),Math.round(t)-Math.round(this.order.total)}},components:{process:W.Z},methods:{getOrder(){this.isLoading=!0;const t=`https://vue3-course-api.hexschool.io/api/bear-work/order/${this.orderID}`;this.$http.get(t).then((t=>{console.log(t),t.data.success?(this.order=t.data.order,this.products={...t.data.order.products},this.user={...t.data.order.user}):this.$swal({icon:"error",title:"載入失敗",text:"請重新整理頁面"}),this.isLoading=!1})).catch((t=>{this.isLoading=!1,this.$swal({icon:"error",title:"發生錯誤",text:t,footer:'<a href="">請洽詢管理員</a>'})}))},toPaid(){this.isLoading=!0;const t=`https://vue3-course-api.hexschool.io/api/bear-work/pay/${this.orderID}`;this.$http.post(t).then((t=>{t.data.success?this.getOrder():this.$swal({icon:"error",title:"載入失敗",text:"請重新整理頁面"}),this.isLoading=!1})).catch((t=>{this.isLoading=!1,this.$swal({icon:"error",title:"發生錯誤",text:t,footer:'<a href="">請洽詢管理員</a>'})}))}},created(){this.orderID=this.$route.params.orderID,this.getOrder()}},E=r(89);const K=(0,E.Z)(Y,[["render",U]]);var N=K}}]);
//# sourceMappingURL=933.160c9b4d.js.map