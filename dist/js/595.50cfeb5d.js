"use strict";(self["webpackChunkmy_project"]=self["webpackChunkmy_project"]||[]).push([[595],{510:function(t,e,s){s.d(e,{Z:function(){return d}});var i=s(3396),a=s(7139);const o={class:"fs-1"};function n(t,e,s,n,r,l){return(0,i.wg)(),(0,i.iD)("div",{class:"small-banner",style:(0,a.j5)([{"background-image":`url(${s.bannerInfo.url})`},{"background-position":`${s.bannerInfo.position}`}])},[(0,i._)("span",o,(0,a.zw)(s.bannerInfo.title),1)],4)}var r={props:["bannerInfo"]},l=s(89);const c=(0,l.Z)(r,[["render",n],["__scopeId","data-v-5e21bcb2"]]);var d=c},8595:function(t,e,s){s.r(e),s.d(e,{default:function(){return P}});var i=s(3396),a=s(7139);const o={class:"container mb-5"},n={key:0,class:"border mt-5 mb-3 px-0 px-md-5 py-0 py-md-5"},r={class:"table table-borderless align-middle text-secondary"},l=(0,i._)("thead",{class:"table-light"},[(0,i._)("tr",null,[(0,i._)("th",null,"縮圖"),(0,i._)("th",null,"商品名稱"),(0,i._)("th",{class:"d-none d-md-table-cell"},"單價"),(0,i._)("th",{colspan:"2"})])],-1),c=["onClick","src","alt"],d=["onClick"],u={class:"d-block d-md-none"},p={class:"d-none d-md-table-cell"},h=["onClick"],b=(0,i._)("i",{class:"bi bi-cart-plus-fill"},null,-1),f=[b],g=["onClick"],m=(0,i._)("i",{class:"bi bi-trash3-fill"},null,-1),v=[m],_={key:1,class:"border my-5 py-5"},k={class:"text-center py-5"},y=(0,i._)("i",{class:"bi bi-clipboard-heart text-secondary",style:{"font-size":"120px"}},null,-1),w=(0,i._)("p",null,"您尚無加入收藏的商品",-1),x=(0,i.Uk)("來去逛逛");function C(t,e,s,b,m,C){const D=(0,i.up)("loadingTip"),I=(0,i.up)("banner"),$=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(D,{active:m.isLoading},null,8,["active"]),(0,i.Wm)(I,{bannerInfo:m.bannerInfo},null,8,["bannerInfo"]),(0,i._)("div",o,[0!==C.favoriteProducts.length?((0,i.wg)(),(0,i.iD)("div",n,[(0,i._)("table",r,[l,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(C.favoriteProducts,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t.id},[(0,i._)("td",null,[(0,i._)("img",{class:"cursor-hover",onClick:e=>C.getProduct(t.id),src:t.imgLink,alt:t.title,style:{width:"100px"}},null,8,c)]),(0,i._)("td",null,[(0,i._)("p",{class:"cursor-hover",onClick:e=>C.getProduct(t.id)},(0,a.zw)(t.title),9,d),(0,i._)("p",u," 單價: "+(0,a.zw)(t.price),1)]),(0,i._)("td",p,(0,a.zw)(t.price),1),(0,i._)("td",null,[(0,i._)("button",{type:"button",class:"btn btn-sm",onClick:e=>C.addCart(t.id)},f,8,h)]),(0,i._)("td",null,[(0,i._)("button",{type:"button",class:"btn btn-sm",onClick:e=>C.delFavorite(t.id)},v,8,g)])])))),128))])])])):((0,i.wg)(),(0,i.iD)("div",_,[(0,i._)("div",k,[y,w,(0,i.Wm)($,{class:"btn btn-primary rounded-0",to:"/products"},{default:(0,i.w5)((()=>[x])),_:1})])]))])],64)}var D=s(510),I={data(){return{favoriteData:JSON.parse(localStorage.getItem("favorite"))||[],products:[],bannerInfo:{url:"https://images.pexels.com/photos/8151548/pexels-photo-8151548.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260",title:"收藏清單",position:"0% 60%"},isLoading:!1}},inject:["emitter"],components:{banner:D.Z},computed:{favoriteProducts(){return this.products.filter((t=>-1!==this.favoriteData.indexOf(t.id)))}},methods:{getProducts(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/bear-work/products/all";this.$http.get(t).then((t=>{t.data.success&&(this.products=t.data.products,this.isLoading=!1)}))},getProduct(t){this.$router.push(`/product/${t}`)},delFavorite(t){const e=this.favoriteData.indexOf(t);-1!==e&&(this.favoriteData.splice(e,1),this.$swal({icon:"success",title:"移除成功"})),localStorage.setItem("favorite",JSON.stringify(this.favoriteData)),this.emitter.emit("updateNavbarFavorite")},addCart(t){const e="https://vue3-course-api.hexschool.io/api/bear-work/cart",s={product_id:t,qty:1};this.isLoading=!0,this.$http.post(e,{data:s}).then((t=>{t.data.success?(console.log(t),this.isLoading=!1,this.$swal({icon:"success",title:`${t.data.data.product.title}<br>已加入購物車`,text:"您可至購物車確認選購細項"}),this.emitter.emit("updateNavbarCart")):(this.isLoading=!1,this.$swal({icon:"error",title:"商品加入失敗",text:"請重新加入購物車"}))})).catch((t=>{this.isLoading=!1,this.$swal({icon:"error",title:"發生錯誤",text:t,footer:'<a href="">請洽詢管理員</a>'})}))}},created(){this.getProducts()}},$=s(89);const L=(0,$.Z)(I,[["render",C]]);var P=L}}]);
//# sourceMappingURL=595.50cfeb5d.js.map