"use strict";(self["webpackChunkmy_project"]=self["webpackChunkmy_project"]||[]).push([[728],{3728:function(t,e,a){a.r(e),a.d(e,{default:function(){return Z}});var i=a(3396),s=a(7139),o=a(9242);const r={class:"container"},c=(0,i._)("br",null,null,-1),n={class:"row mt-4"},l={class:"col-md-2 d-none d-md-block"},g={class:"list-group list-group-flush rounded-0"},d=["onClick"],u={class:"col-12 col-md-10"},p={class:"row"},h={class:"card rounded-0 border-0"},v={class:"text-secondary cursor-hover"},P={class:"product-hover"},w=["onClick"],m=["onClick"],k=["onClick"],_=(0,i._)("p",{class:"fs-3 border border-primary border-end-0 border-start-0 text-center text-primary fw-blod"}," SALE OUT ",-1),C=[_],b=["onClick"],f={key:0,class:"fw-bold text-danger"},y={key:1},D={key:2,class:"fw-bold"},S={class:"d-flex justify-content-center"};function x(t,e,a,_,x,N){const $=(0,i.up)("loadingTip"),z=(0,i.up)("pagination");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)($,{active:x.isLoading},null,8,["active"]),(0,i._)("div",r,[(0,i.Uk)(" [test]目前選到的分類:"+(0,s.zw)(x.activedCategory),1),c,(0,i.Uk)(" [test]目前的分頁數:"+(0,s.zw)(N.totalPageNum)+" ",1),(0,i._)("div",n,[(0,i._)("div",l,[(0,i._)("div",g,[(0,i._)("a",{href:"#",class:(0,s.C_)(["list-group-item list-group-item-action",{active:""===x.activedCategory}]),"aria-current":"true",onClick:e[0]||(e[0]=(0,o.iM)((t=>N.getPage("")),["prevent"]))}," 全部商品 ",2),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(x.categories,((t,e)=>((0,i.wg)(),(0,i.iD)("a",{key:e,href:"#",class:(0,s.C_)(["list-group-item list-group-item-action",{active:x.activedCategory===t}]),onClick:(0,o.iM)((e=>N.getPage(t)),["prevent"])},(0,s.zw)(t),11,d)))),128))])]),(0,i._)("div",u,[(0,i._)("div",p,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(N.showPageData,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"col-12 col-sm-6 col-md-4 col-lg-3 mb-3",key:t.id},[(0,i._)("div",h,[(0,i._)("div",v,[(0,i._)("div",P,[(0,i._)("div",{class:"rounded-0 card-imge",style:(0,s.j5)({backgroundImage:`url(${t.imgLink})`})},null,4),(0,i._)("div",{class:"mask",onClick:e=>N.getProduct(t.id)},null,8,w),0!=t.unit?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",class:"btn btn-primary add-cart-btn w-100 rounded-0",onClick:(0,o.iM)((e=>N.addCart(t.id)),["prevent"])}," 加入購物車 ",8,m)):(0,i.kq)("",!0),0==t.unit?((0,i.wg)(),(0,i.iD)("div",{key:1,class:"mask-white",onClick:e=>N.getProduct(t.id)},C,8,k)):(0,i.kq)("",!0)]),(0,i._)("div",{class:"pt-1 text-center",onClick:e=>N.getProduct(t.id)},[(0,i._)("div",null,(0,s.zw)(t.title),1),t.origin_price?((0,i.wg)(),(0,i.iD)("div",f," NT$"+(0,s.zw)(t.price),1)):(0,i.kq)("",!0),t.origin_price?((0,i.wg)(),(0,i.iD)("del",y,"NT$"+(0,s.zw)(t.origin_price),1)):((0,i.wg)(),(0,i.iD)("div",D,"NT$"+(0,s.zw)(t.price),1))],8,b)])])])))),128))]),(0,i._)("div",S,[(0,i.Wm)(z,{totalPageNum:N.totalPageNum,pageStatus:x.pageStatus,onChangePage:N.changePageNum},null,8,["totalPageNum","pageStatus","onChangePage"])])])])])],64)}const N={"aria-label":"Page navigation example"},$={class:"pagination"},z=(0,i._)("span",{"aria-hidden":"true"},"«",-1),L=[z],T=["onClick"],M=(0,i._)("span",{"aria-hidden":"true"},"»",-1),j=[M];function q(t,e,a,r,c,n){return(0,i.wg)(),(0,i.iD)("nav",N,[(0,i._)("ul",$,[(0,i._)("li",{class:(0,s.C_)(["page-item",{disabled:0==a.pageStatus}])},[(0,i._)("a",{class:"page-link rounded-0",href:"#","aria-label":"Previous",onClick:e[0]||(e[0]=(0,o.iM)((t=>n.changePageStatus("pre")),["prevent"]))},L)],2),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.totalPageNum,(t=>((0,i.wg)(),(0,i.iD)("li",{key:t,class:(0,s.C_)(["page-item",{active:a.pageStatus==t-1}])},[(0,i._)("a",{class:"page-link",href:"#",onClick:(0,o.iM)((e=>n.changePageStatus(t-1)),["prevent"])},(0,s.zw)(t),9,T)],2)))),128)),(0,i._)("li",{class:(0,s.C_)(["page-item",{disabled:a.pageStatus+1==a.totalPageNum}])},[(0,i._)("a",{class:"page-link rounded-0",href:"#","aria-label":"Next",onClick:e[1]||(e[1]=(0,o.iM)((t=>n.changePageStatus("next")),["prevent"]))},j)],2)]),(0,i.Uk)(" "+(0,s.zw)(a.pageStatus)+" "+(0,s.zw)(c.toPage),1)])}var H={data(){return{toPage:0}},props:["totalPageNum","pageStatus"],methods:{changePageStatus(t){this.toPage=t,"next"===t?this.toPage=this.pageStatus+1:"pre"===t&&(this.toPage=this.pageStatus-1),this.$emit("changePage",this.toPage)}}},U=a(89);const Y=(0,U.Z)(H,[["render",q]]);var K=Y,E={data(){return{products:[],isLoading:!1,categories:[],activedCategory:"",newPageDate:[],pageDataTotal:8,pageStatus:0}},computed:{filterProducts(){return this.products.filter((t=>t.category.match(this.activedCategory)))},totalPageNum(){return Math.ceil(this.filterProducts.length/this.pageDataTotal)},showPageData(){return this.newPageDate[this.pageStatus]}},components:{pagination:K},methods:{getProducts(){const t="https://vue3-course-api.hexschool.io/api/bear-work/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{t.data.success&&(console.log(t),this.products=t.data.products,this.isLoading=!1,this.getCategories(),this.getPage(""))}))},getProduct(t){this.$router.push(`/user/product/${t}`)},addCart(t){const e="https://vue3-course-api.hexschool.io/api/bear-work/cart",a={product_id:t,qty:1};this.isLoading=!0,this.$http.post(e,{data:a}).then((t=>{t.data.success?(console.log(t),this.isLoading=!1,this.$swal({icon:"success",title:`${t.data.data.product.title}<br>已加入購物車`,text:"您可至購物車確認選購細項"})):(this.isLoading=!1,this.$swal({icon:"error",title:"商品加入失敗",text:"請重新加入購物車"}))})).catch((t=>{this.isLoading=!1,this.$swal({icon:"error",title:"發生錯誤",text:t,footer:'<a href="">請洽詢管理員</a>'})}))},getCategories(){const t=new Set;this.products.forEach((e=>{t.add(e.category)})),this.categories=[...t]},getPage(t){this.activedCategory=t,this.newPageDate=[],this.pageStatus=0;for(let e=0;e<this.totalPageNum;e++){const t=this.filterProducts.slice(e*this.pageDataTotal,e*this.pageDataTotal+this.pageDataTotal);this.newPageDate.push(t)}console.log(this.newPageDate)},changePageNum(t){this.pageStatus=t}},created(){this.getProducts()}};const W=(0,U.Z)(E,[["render",x]]);var Z=W}}]);
//# sourceMappingURL=728.7124e7ea.js.map