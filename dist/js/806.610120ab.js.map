{"version":3,"file":"js/806.610120ab.js","mappings":"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","sources":["webpack://my-project/./src/views/front/UserCart.vue","webpack://my-project/./src/views/front/UserCart.vue?4615"],"sourcesContent":["<template>\r\n  <loadingTip :active=\"isLoading\"></loadingTip>\r\n  <div class=\"container\">\r\n    <div v-if=\"carts.length\" class=\"border mt-5 mb-3 px-md-5 pt-5\">\r\n      <!-- 步驟條 -->\r\n      <ul class=\"process mb-5 d-none d-md-flex\">\r\n        <li :class=\"{ 'bg-primary': processPath == '/user/cart' }\">\r\n          <i\r\n            class=\"bi bi-cart-check-fill fs-2\"\r\n            :class=\"{ 'text-light': processPath == '/user/cart' }\"\r\n          ></i>\r\n          <span :class=\"{ 'text-light': processPath == '/user/cart' }\"\r\n            >確認購買明細</span\r\n          >\r\n        </li>\r\n        <li>\r\n          <i class=\"bi bi-person-lines-fill fs-2\"></i>\r\n          <span>填寫訂購資料</span>\r\n        </li>\r\n        <li>\r\n          <i class=\"bi bi-check-circle-fill fs-2\"></i>\r\n          <span>完成商品訂購</span>\r\n        </li>\r\n      </ul>\r\n\r\n      <!-- 訂購列表 -->\r\n      <table class=\"table table-borderless align-middle text-secondary\">\r\n        <thead class=\"table-light\">\r\n          <tr>\r\n            <th>縮圖</th>\r\n            <th>商品名稱</th>\r\n            <th>尺寸</th>\r\n            <th>數量</th>\r\n            <th>單價</th>\r\n            <th>小計</th>\r\n            <th>刪除</th>\r\n          </tr>\r\n        </thead>\r\n\r\n        <tbody>\r\n          <tr v-for=\"(item, key) in carts\" :key=\"key\">\r\n            <td>\r\n              <img\r\n                class=\"cursor-hover\"\r\n                @click=\"getProduct(item.product_id)\"\r\n                :src=\"item.product.imgLink\"\r\n                :alt=\"item.product.title\"\r\n                style=\"width: 100px\"\r\n              />\r\n            </td>\r\n            <td>{{ item.product.title }}</td>\r\n            <td>S</td>\r\n            <td>\r\n              <div class=\"d-flex align-items-center\">\r\n                <button\r\n                  class=\"btn btn-sm rounded-0 d-flex align-items-center border\"\r\n                  type=\"button\"\r\n                  :class=\"{ disabled: item.qty == 1 }\"\r\n                  @click=\"updateCart(item, 'reduceQty')\"\r\n                >\r\n                  <i class=\"bi bi-dash\"></i>\r\n                </button>\r\n\r\n                <span\r\n                  class=\"form-control-sm text-center border-top border-bottom rounded-0\"\r\n                  >{{ item.qty }}</span\r\n                >\r\n\r\n                <button\r\n                  class=\"btn btn-sm d-flex align-items-center border rounded-0\"\r\n                  type=\"button\"\r\n                  @click=\"updateCart(item, 'addQty')\"\r\n                >\r\n                  <i class=\"bi bi-plus\"></i>\r\n                </button>\r\n              </div>\r\n            </td>\r\n            <td>\r\n              <span>{{ item.product.price }}</span>\r\n            </td>\r\n            <td>\r\n              <span>{{ item.total }}</span>\r\n            </td>\r\n            <td>\r\n              <button type=\"button\" class=\"btn btn-sm\" @click=\"deleteCart(item)\">\r\n                <i class=\"bi bi-trash3-fill\"></i>\r\n              </button>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n      <div class=\"input-group\">\r\n        <input type=\"text\" class=\"form-control\" placeholder=\"請輸入優惠代碼\">\r\n        <button class=\"btn btn-outline-secondary\" type=\"button\">使用</button>\r\n      </div>\r\n\r\n      <ul class=\"cart-total py-5\">\r\n        <li>總計金額</li>\r\n        <li><span>NT$ 15400</span></li>\r\n      </ul>\r\n\r\n      <div class=\"d-flex flex-row-reverse py-5 border-top\">\r\n        <button class=\"btn btn-primary rounded-0\">下一步:填寫訂購資料</button>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-else class=\"border my-5 py-5\">\r\n      <div class=\"text-center py-5\">\r\n        <p>您的購物車尚未加入商品</p>\r\n        <button class=\"btn btn-primary rounded-0\" type=\"button\">\r\n          繼續購物\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      carts: {},\r\n      isLoading: false,\r\n      qty: '',\r\n      processPath: ''\r\n    }\r\n  },\r\n  methods: {\r\n    getCart () {\r\n      this.isLoading = true\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      this.$http\r\n        .get(api)\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            console.log(res.data.data.carts)\r\n            this.carts = res.data.data.carts // 取得購物車資料\r\n            this.isLoading = false\r\n          } else {\r\n            this.$swal({\r\n              icon: 'error',\r\n              title: '載入失敗',\r\n              text: '請重新整理頁面'\r\n            })\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          this.$swal({\r\n            icon: 'error',\r\n            title: '發生錯誤',\r\n            text: err,\r\n            footer: '<a href=\"\">請洽詢管理員</a>'\r\n          })\r\n          this.isLoading = false\r\n        })\r\n    },\r\n    getProduct (id) {\r\n      this.$router.push(`/user/product/${id}`)\r\n    },\r\n    deleteCart (item) {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`\r\n      this.$swal({\r\n        title: '確定移除?',\r\n        text: `【${item.product.title}】從購物車移除`,\r\n        icon: 'warning',\r\n        showCancelButton: true,\r\n        confirmButtonColor: '#8144AD',\r\n        cancelButtonColor: '#d33',\r\n        confirmButtonText: '確定',\r\n        cancelButtonText: '取消',\r\n        reverseButtons: true\r\n      }).then((result) => {\r\n        if (result.isConfirmed) {\r\n          this.isLoading = true\r\n          this.$http.delete(api)\r\n            .then((res) => {\r\n              console.log(res)\r\n              this.getCart()\r\n              this.isLoading = false\r\n              this.$swal(\r\n                '移除成功',\r\n                '',\r\n                'success'\r\n              )\r\n            })\r\n        }\r\n      })\r\n    },\r\n\r\n    updateCart (item, status) {\r\n      this.isLoading = true\r\n      this.qty = item.qty\r\n      if (status === 'addQty') {\r\n        this.qty++\r\n      } else if (status === 'reduceQty') {\r\n        this.qty--\r\n      }\r\n\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`\r\n      const cartData = {\r\n        product_id: item.product.id,\r\n        qty: this.qty\r\n      }\r\n      this.$http.put(api, { data: cartData })\r\n        .then((res) => {\r\n          this.isLoading = false\r\n          if (res.data.success) {\r\n            this.getCart()\r\n            console.log(res)\r\n          } else {\r\n            this.$swal({\r\n              icon: 'error',\r\n              title: '更新失敗',\r\n              text: '請重新操作'\r\n            })\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          this.isLoading = false\r\n          this.$swal({\r\n            icon: 'error',\r\n            title: '發生錯誤',\r\n            text: err,\r\n            footer: '<a href=\"\">請洽詢管理員</a>'\r\n          })\r\n        })\r\n    }\r\n  },\r\n  created () {\r\n    this.getCart()\r\n    this.processPath = this.$route.path\r\n    console.log(this.$route.path)\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./UserCart.vue?vue&type=template&id=85ba0c40\"\nimport script from \"./UserCart.vue?vue&type=script&lang=js\"\nexport * from \"./UserCart.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\Lin\\\\Desktop\\\\my-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_12","_hoisted_16","_hoisted_19","type","_hoisted_25","_createVNode","_component_loadingTip","active","$data","length","_createElementBlock","_hoisted_4","_hoisted_5","_hoisted_7","_Fragment","_renderList","item","key","onClick","$options","product_id","src","product","imgLink","alt","title","style","_toDisplayString","_hoisted_9","disabled","qty","price","total","_hoisted_21","_hoisted_26","data","carts","isLoading","processPath","methods","getCart","this","api","$http","get","then","res","success","console","log","$swal","icon","text","catch","err","footer","getProduct","id","$router","push","deleteCart","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","reverseButtons","result","isConfirmed","delete","updateCart","status","cartData","put","created","$route","path","__exports__","render"],"sourceRoot":""}